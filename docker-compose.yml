version: "3.9"
services:
    web:
        build:
            context: ./web
        container_name: web
        restart: always # 生錯誤重新啟動容器
        volumes:
            - /var/log/sexsexder:/usr/app/logs
        ports :
            - 5000:5000
        env_file:
            - prd.env
        depends_on:
            - rabbitmq
    worker:
        build:
            context: ./worker
        container_name: worker
        restart: always # 生錯誤重新啟動容器
        volumes:
            - /var/log/sexsexder:/usr/app/logs
            - /usr/data/sexsexder/downloads:/usr/app/downloads
            - ./session:/usr/app/session
            - /usr/data/sexsexder/data:/usr/app/data
        env_file:
            - prd.env
        depends_on:
            - rabbitmq
    mysql:
